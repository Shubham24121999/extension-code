<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Perplexity CSV Runner</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self'; object-src 'self'">
    <style>
      body { font: 14px system-ui, sans-serif; margin: 12px; width: 400px; }
      .row { margin: 8px 0; }
      input[type=file], input[type=text], input[type=number] { width: 100%; box-sizing: border-box; }
      button { margin-right: 6px; margin-bottom: 6px; }
      textarea { width: 100%; height: 160px; }
      .muted { color: #666; font-size: 12px; }
    </style>
  </head>
  <body>
    <div class="row">
      <input id="csvFile" type="file" accept=".csv,text/csv"/>
      <div class="muted">CSV with header "question" or specify a column/index.</div>
    </div>

    <div class="row">
      <label>Column name or index</label>
      <input id="column" placeholder="e.g., question or 0"/>
    </div>

    <div class="row">
      <label>Delay after answer (ms)</label>
      <input id="delay" type="number" value="600"/>
    </div>

    <div class="row">
      <button id="openPPLX">Open Perplexity</button>
      <button id="start">Start</button>
      <button id="stop">Stop</button>
    </div>

    <div class="row">
      <button id="exportCSV">Export CSV</button>
      <button id="exportJSON">Export JSON</button>
      <button id="clearResults">Clear</button>
    </div>

    <div class="row">
      <label>Status/log</label>
      <textarea id="log" readonly></textarea>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
